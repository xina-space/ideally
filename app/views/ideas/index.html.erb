

<div class="idea-top d-flex">
  <div class="back-button-box bd-highlight p-3">
  <%= link_to categories_path do %>
    <i class="ph-arrow-circle-left" id="back-button"></i>
  <% end %>
  </div>

  <div class="cat-title bd-highlight w-100 p-3">
    <h2>Your <%= @category.title %> ideas</h2>
  </div>
  <div class="new-idea-link bd-highlight p-3 d-flex align-items-center">
    <% if policy(Category).create? %>
      <%= link_to edit_category_path(@category) do %>
          <i class="ph-pencil-simple-line" id="action-button"></i>
      <% end %>
    <% end %>
  </div>

  <div class="new-idea-link bd-highlight p-3 d-flex align-items-center">
    <% if policy(Category).create? %>
      <%= link_to @category, method: :delete, data: {confirm: "Are you sure you want to delete?"} do %>
          <i class="ph-trash" id="action-button"></i>
      <% end %>
    <% end %>
  </div>

  <div class="new-idea-link bd-highlight p-3 d-flex align-items-center">
    <% if policy(Category).create? %>
      <%= link_to new_category_idea_path do %>
          <p>New idea</p>
      <% end %>
    <% end %>
  </div>
</div>

<div class="progress-container row">
  <div class="not-started col-4">
    <div class="not-started-title col-4 d-flex justify-content-center align-items-center">
        <p class="uppercase-small">Not started</p>
    </div>
    <% @ideas.each do |idea| %>
      <% if idea.category_id == @category.id %>
        <% if idea.status == 'incomplete'  %>
            <h1> <%= idea.title %> </h1>
            <p> <%= idea.description %> </p>
        <% end %>
      <% end %>
    <% end %>
  </div>

  <div class="in-progress col-4">
    <div class="in-progress-title col-4 d-flex justify-content-center align-items-center">
        <p class="uppercase-small">In progress</p>
    </div>
    <% @ideas.each do |idea| %>
      <% if idea.category_id == @category.id %>
        <% if idea.status == 'in progress'  %>
            <h1> <%= idea.title %> </h1>
            <p> <%= idea.description %> </p>
            <%= simple_form_for [@category, idea] do |f| %>
              <%= f.input :status, priority: ['incomplete'], collection: [ "incomplete", "in progress", "done"]  %>
              <%= f.button :submit, class:'submit-button'  %>
            <% end %>
        <% end %>
      <% end %>
    <% end %>

  </div>

  <div class="done col-4">
    <div class="done-title col-4 d-flex justify-content-center align-items-center">
        <p class="uppercase-small">Done</p>
    </div>
    <% @ideas.each do |idea| %>
      <% if idea.category_id == @category.id %>
        <% if idea.status == 'done'  %>
            <h1> <%= idea.title %> </h1>
            <p> <%= idea.description %> </p>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>
